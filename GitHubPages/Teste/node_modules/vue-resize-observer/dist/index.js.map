{"version":3,"file":"index.js","sources":["../src/utils.js","../src/resize-observer-directive.js","../src/index.js"],"sourcesContent":["/**\n * 是否是IE浏览器的判断\n *\n * @function\n *\n * @return {Boolean} 是否IE浏览器的判断结果\n */\nexport function isIE() {\n  let _isIE = false;\n  if (typeof navigator !== \"undefined\") {\n    _isIE =\n      navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/Edge/);\n  }\n  return _isIE;\n}\n\nvar lastTime = 0;\nvar vendors = [\"ms\", \"moz\", \"webkit\", \"o\"];\nif (typeof window === \"undefined\") {\n  global.window = {};\n}\nfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n  window.requestAnimationFrame = window[vendors[x] + \"RequestAnimationFrame\"];\n  window.cancelAnimationFrame =\n    window[vendors[x] + \"CancelAnimationFrame\"] ||\n    window[vendors[x] + \"CancelRequestAnimationFrame\"];\n}\n\nif (!window.requestAnimationFrame) {\n  window.requestAnimationFrame = function(callback, element) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = window.setTimeout(function() {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n}\n\nif (!window.cancelAnimationFrame) {\n  window.cancelAnimationFrame = function(id) {\n    clearTimeout(id);\n  };\n}\n\n/**\n * requestAnimationFrame的兼容处理\n *\n * @see {@link https://gist.github.com/paulirish/1579671}\n */\nexport const $requestAnimationFrame = window.requestAnimationFrame;\n\n/**\n * cancelAnimationFrame的兼容处理\n *\n * @see {@link https://gist.github.com/paulirish/1579671}\n */\nexport const $cancelAnimationFrame = window.cancelAnimationFrame;\n","import { isIE, $requestAnimationFrame, $cancelAnimationFrame } from \"./utils\";\n\n/**\n * resize处理器，此处回调元素v-resize的方法\n *\n * @param event {Event} resizeTrigge的resize事件传递，来自{@link registereResizeHandler}方法中产生的事件源\n *\n * @function\n *\n * @see {@link registereResizeHandler}\n */\nfunction resizeHandler(event) {\n  event.__currentTarget__ = this.__container__;\n  this.__resize__handler__.call(\n    this,\n    {\n      width: this.offsetWidth,\n      height: this.offsetHeight\n    },\n    event\n  );\n}\n\n/**\n * 优化resize监听\n *\n * @param event {Event} resizeTrigge的resize事件传递，来自{@link registereResizeHandler}方法中产生的事件源\n *\n * @function\n *\n * @see {@link https://developer.mozilla.org/zh-CN/docs/Web/API/Window/resize_event}\n *\n * @see {@link registereResizeHandler}\n */\nfunction resizeTriggerListener(event) {\n  const _resizeTrigger = event.currentTarget || event.srcElement;\n  if (_resizeTrigger.__requestAnimationFrameID__) {\n    $cancelAnimationFrame(_resizeTrigger.__requestAnimationFrameID__);\n  }\n  _resizeTrigger.__requestAnimationFrameID__ = $requestAnimationFrame(\n    resizeHandler.bind(this, event)\n  );\n}\n\n/**\n * 注册resize处理方法\n *\n * @function\n */\nfunction registereResizeHandler() {\n  if (document.attachEvent) {\n    this.__container__.attachEvent(\"onresize\", resizeHandler.bind(this));\n  } else {\n    this.contentDocument.defaultView.addEventListener(\n      \"resize\",\n      resizeTriggerListener.bind(this)\n    );\n  }\n}\n\n/**\n * 创建resize真正的触发器\n *\n * @function\n */\nfunction createResizeTrigger() {\n  const object = document.createElement(\"object\");\n  object.setAttribute(\"aria-hidden\", \"true\");\n  object.setAttribute(\"tabindex\", -1);\n  const objectStyle = `\n    display: block !important; \n    position: absolute !important; \n    top: 0 !important; \n    left: 0 !important; \n    width: 100% !important; \n    height: 100% !important; \n    overflow: hidden !important; \n    pointer-events: none !important; \n    z-index: -1 !important; \n    opacity: 0 !important;\n  `;\n  object.setAttribute(\"style\", objectStyle);\n  object.type = \"text/html\";\n\n  return object;\n}\n\n/**\n * resize观察者指令对象\n *\n * @module resizeObserverDirective\n */\nexport const resizeObserverDirective = {\n  /**\n   * bind → beforeMount\n   *\n   * @param el {Element} 操作的元素\n   * @param binding {Object} 一些绑定相关的值\n   * @param vnode {VNode} Vue 编译生成的虚拟节点\n   * @param oldVnode {VNode} 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n   *\n   * @function beforeMount\n   */\n  beforeMount(el, binding, vnode, oldVnode) {\n    // 获得真正的触发器\n    el.__resizeTrigger__ = createResizeTrigger();\n    el.__resizeTrigger__.__container__ = el;\n    el.__resizeTrigger__.__resize__handler__ = binding.value;\n    el.__resizeTrigger__.onload = registereResizeHandler;\n\n    // 将真正的触发器作为子元素添加到当前元素\n    const _isIE = isIE();\n    _isIE && el.appendChild(el.__resizeTrigger__);\n    el.__resizeTrigger__.data = \"about:blank\";\n    !_isIE && el.appendChild(el.__resizeTrigger__);\n  },\n\n  /**\n   * inserted → mounted\n   *\n   * @param el {Element} 操作的元素\n   * @param binding {Object} 一些绑定相关的值\n   * @param vnode {VNode} Vue 编译生成的虚拟节点\n   * @param oldVnode {VNode} 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n   *\n   * @function mounted\n   */\n  mounted(el, binding, vnode, oldVnode) {\n    if (getComputedStyle(el).position === \"static\") {\n      el.style.setProperty(\"position\", \"relative\", \"important\");\n    }\n  },\n\n  /**\n   * beforeUpdate (new)\n   *\n   * @param el {Element} 操作的元素\n   * @param binding {Object} 一些绑定相关的值\n   * @param vnode {VNode} Vue 编译生成的虚拟节点\n   * @param oldVnode {VNode} 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n   *\n   * @function beforeUpdate\n   */\n  beforeUpdate(el, binding, vnode, oldVnode) {},\n\n  /**\n   * update (has been removed)\n   * componentUpdated → updated\n   *\n   * @param el {Element} 操作的元素\n   * @param binding {Object} 一些绑定相关的值\n   * @param vnode {VNode} Vue 编译生成的虚拟节点\n   * @param oldVnode {VNode} 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n   *\n   * @function updated\n   */\n  updated(el, binding, vnode, oldVnode) {\n    var inserted = false;\n    for (var i = 0, length = el.children.length; i < length; i++) {\n      if (el.children[i] === el.__resizeTrigger__) {\n        inserted = true;\n      }\n    }\n    if (!inserted) {\n      var _isIE = isIE();\n      _isIE && el.appendChild(el.__resizeTrigger__);\n      el.__resizeTrigger__.data = \"about:blank\";\n      !_isIE && el.appendChild(el.__resizeTrigger__);\n    }\n  },\n\n  /**\n   * beforeUnmount (new)\n   *\n   * @param el {Element} 操作的元素\n   * @param binding {Object} 一些绑定相关的值\n   * @param vnode {VNode} Vue 编译生成的虚拟节点\n   * @param oldVnode {VNode} 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n   *\n   * @function beforeMount\n   */\n  beforeUnmount(el, binding, vnode, oldVnode) {},\n  /**\n   * unbind -> unmounted\n   *\n   * @param el {Element} 操作的元素\n   * @param binding {Object} 一些绑定相关的值\n   * @param vnode {VNode} Vue 编译生成的虚拟节点\n   * @param oldVnode {VNode} 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n   *\n   * @function unmounted\n   */\n  unmounted(el, binding, vnode, oldVnode) {\n    if (document.attachEvent) {\n      el.detachEvent(\"onresize\", resizeHandler);\n    } else if (el.__resizeTrigger__ && el.__resizeTrigger__.contentDocument) {\n      el.__resizeTrigger__.contentDocument.defaultView.removeEventListener(\n        \"resize\",\n        resizeTriggerListener\n      );\n      el.__resizeTrigger__ = !el.removeChild(el.__resizeTrigger__);\n    }\n  }\n};\n","import { resizeObserverDirective } from \"./resize-observer-directive\";\n\n/**\n * vue resize事件对象\n *\n * @module vueResizeObserver\n */\nconst vueResizeObserver = resizeObserverDirective\n\n/**\n * 插件安装方法\n *\n * @param Vue {Vue} Vue构造器\n *\n * @function install\n */\nresizeObserverDirective.install = function (app) {\n  app.directive(\"resize\", resizeObserverDirective);\n}\n\nexport default vueResizeObserver;\n\n/**\n * 模块处理\n */\nif (typeof exports == \"object\") {\n  module.exports = vueResizeObserver;\n} else if (typeof define == \"function\" && define.amd) {\n  define([], function() {\n    return vueResizeObserver;\n  });\n} else if (typeof window !== \"undefined\" && window.Vue) {\n  window.__vue_resize_observer__ = vueResizeObserver;\n  // Vue.use(vueResizeObserver);\n}\n"],"names":["let","const"],"mappings":"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"}